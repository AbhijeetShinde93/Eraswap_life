<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>EraSwap Shop</title>

    <link rel="apple-touch-icon" href="images/favicon-min.png">
    <link rel="shortcut icon" href="images/favicon-min.png">

    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">

  </head>

  <script src="js/bundle.js"></script>
  
  <script type="text/javascript">
    $(document).ready(function(){
    $('.toggle').click(function(){
        $('.toggle').toggleClass('active');
        $('ul').toggleClass('active');
    });
  });
    refer="";
    base_url = "http://13.234.115.87:8000/"

    function submit_refer(){
        if(refer){
            post("graph/refer",{address:refer})
        }
    }


    async function get(data){
        data["signature"]=await wallet.signMessage(await $.get(base_url+"userprofile/nonce",{}))
        return $.get(base_url+"graph/first_time",data)
    }


    async function post(url, d) {
    formData = new FormData();
    formData.set("signature",await wallet.signMessage(await $.get(base_url+"userprofile/nonce",{})));
    $.each(d, function(key, value){
      console.log(key);
      formData.set(key, value);
    })


    data = await $.ajax({
                       url: base_url+url,
                       type: "POST",
                       data: formData,
                       cache: false,
                       processData: false,
                       contentType: false,
                       success: function(data) {
                           console.log(data)
                       }
                   });
    return data
}
</script>

  <body></body>
</html>
